---
description: 코드 작업 시 적용할 리팩터링 원칙과 코드 품질 기준
---

# 코드 품질 가이드라인 (Martin Fowler 원칙 기반)

## 핵심 철학

> "리팩터링을 결심하는 게 아니다. 다른 것을 하고 싶은데, 리팩터링이 그것을 돕기 때문에 하는 것이다." — Martin Fowler

## 보이스카우트 규칙

> "코드를 만질 때마다 왔을 때보다 조금 더 깨끗하게 떠나라."

모든 코드 작업 시 이 규칙을 자동으로 적용한다.

---

## 자동으로 수행할 것 (별도 지시 불필요)

### 1. 죽은 코드 제거
- 미사용 변수, 함수, import 발견 시 제거
- 주석 처리된 코드 발견 시 제거 검토

### 2. 타입 안전성 개선
- `as any` 타입 캐스팅 발견 시 적절한 타입으로 교체
- 타입 정의가 있는 필드에 대한 불필요한 캐스팅 제거

### 3. Long Function 개선
- 함수/컴포넌트가 **200줄 이상**이고, 명확히 분리 가능한 로직이 있으면 분리 진행
- 단, 전체 파일 구조 변경이 필요한 경우는 먼저 상의

### 4. Extract Function / Hook
- 50줄 이상의 독립적인 로직 블록 발견 시 함수/훅으로 분리 검토
- 특히 `useMemo`, `useCallback` 내부 로직이 복잡한 경우

### 5. 코드 가독성
- 중복 주석 제거
- 불필요한 빈 줄 정리
- 일관된 네이밍 유지

---

## 먼저 상의할 것

1. **파일 구조 전면 개편** (폴더 이동, 파일 분할 등)
2. **성능에 영향을 줄 수 있는 변경**
3. **외부 API 인터페이스 변경**
4. **트레이드오프가 있는 결정** (A vs B 선택이 필요한 경우)

---

## 참고 기준 (Code Smells)

| Code Smell | 기준 | 대응 |
|------------|------|------|
| Long Function | 200줄 이상 | 분리 검토 |
| Long Parameter List | 5개 이상 파라미터 | 객체로 묶기 검토 |
| Duplicated Code | 3회 이상 반복 | 추출 (Rule of Three) |
| Feature Envy | 다른 모듈 데이터에 과도한 의존 | 해당 모듈로 로직 이동 검토 |

---

## 출처
- Martin Fowler, *Refactoring* 2nd Edition (2018)
- Robert C. Martin, *Clean Code* (2008)
